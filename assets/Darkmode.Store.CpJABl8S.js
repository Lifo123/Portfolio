let l=[],o=0;const c=4;let d=a=>{let s=[],e={get(){return e.lc||e.listen(()=>{})(),e.value},lc:0,listen(t){return e.lc=s.push(t),()=>{for(let r=o+c;r<l.length;)l[r]===t?l.splice(r,c):r+=c;let n=s.indexOf(t);~n&&(s.splice(n,1),--e.lc||e.off())}},notify(t,n){let r=!l.length;for(let i of s)l.push(i,e.value,t,n);if(r){for(o=0;o<l.length;o+=c)l[o](l[o+1],l[o+2],l[o+3]);l.length=0}},off(){},set(t){let n=e.value;n!==t&&(e.value=t,e.notify(n))},subscribe(t){let n=e.listen(t);return t(e.value),n},value:a};return e};const u=typeof window<"u",m=d(u&&localStorage.getItem("F-Theme")||"system"),h=(a,s)=>{if(m.set(s),localStorage.setItem(a,s),s==="system"){const t=f();document.documentElement.classList[t?"add":"remove"]("dark"),document.documentElement.style.colorScheme=t?"dark":"light";return}const e=s==="dark";document.documentElement.classList[e?"add":"remove"]("dark"),document.documentElement.style.colorScheme=e?"dark":"light"},f=()=>window.matchMedia("(prefers-color-scheme: dark)").matches;export{m as $,h,f as p};
